<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Angular Unit Testing with Spectator - Backbase Engineering</title>
<meta name="description" content="A robust testing library for unit testing">


  <meta name="author" content="Utku">
  
  <meta property="article:author" content="Utku">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Backbase Engineering">
<meta property="og:title" content="Angular Unit Testing with Spectator">
<meta property="og:url" content="https://backbase.github.io/2023/10/25/angular-unit-testing-with-spectator">


  <meta property="og:description" content="A robust testing library for unit testing">



  <meta property="og:image" content="https://backbase.github.io/assets/images/post/spectator-banner.png">





  <meta property="article:published_time" content="2023-10-25T00:00:00+00:00">






<link rel="canonical" href="https://backbase.github.io/2023/10/25/angular-unit-testing-with-spectator">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://backbase.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@300;700&display=swap" rel="stylesheet" data-optimized-fonts="true">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

  </head>

  <body class="layout--single min-vh-100 d-flex flex-column">
    <nav class="skip-links visually-hidden-focusable">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul class="list-group">
    <li class="list-group-item"><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li class="list-group-item"><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li class="list-group-item"><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<nav id="site-nav" class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <div class="navbar-brand">
      
        <a class="site-logo text-decoration-none" href="/">
          <span class="bb-engineering-logo">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60.09 66.09">
    <g>
      <polygon
        points="9.49 20.83 18.98 20.83 18.98 11.34 18.98 1.85 9.49 1.85 0 1.85 0 11.34 9.49 11.34 9.49 20.83" />
      <path
        d="M38.98,32.76v-1.49c9.3-1.3,11.72-7.45,11.72-13.5,0-7.48-5.12-15.59-17.78-15.89h-7.61V11.34h7.61c6.69,.11,8.11,4.45,8,7.87-.23,7.66-3.67,7.88-9.59,8.05H9.49v37.96h22.69c15.26,0,20.38-8.65,20.38-17.68,0-7.72-2.7-13.39-13.58-14.79Zm-6.52,22.9h-13.31v-19.17h13.31c8.04,0,10.63,1.52,10.63,9.74,0,6.91-2.59,9.42-10.63,9.42Z" />
    </g>
  </svg>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="60.09 0 330.12 66.09" class="d-none d-lg-block">
    <g>
      <path
        d="M60.04,49.8c0-8.1,5.31-16.29,16.66-16.29,6.52,0,10.15,1.86,12.94,5.59v-12.1h-24.2v-8.38h33.51V55.85h5.59v9.31h-14.89v-4.65c-2.79,3.72-6.42,5.59-12.94,5.59-11.36,0-16.66-8.19-16.66-16.29Zm29.6,0c0-4.65-3.35-7.91-10.15-7.91s-10.15,3.26-10.15,7.91,3.35,7.91,10.15,7.91,10.15-3.26,10.15-7.91Z" />
      <path
        d="M108.72,41.89c0-14.61,7.17-24.2,20.85-24.2,12.19,0,19.36,7.54,19.36,18.62h-9.31c-.37-5.77-2.33-10.24-9.59-10.24-8.66,0-12.01,3.72-12.01,15.82s3.35,15.82,12.01,15.82c7.26,0,9.22-4.47,9.59-10.24h9.31c0,11.08-7.17,18.62-19.36,18.62-13.68,0-20.85-9.59-20.85-24.2Z" />
      <path
        d="M167.08,46.17v18.99h-9.31V0h9.31V37.79h7.26l13.03-19.18h11.26l-15.92,23.36,15.92,23.18h-11.26l-13.03-18.99h-7.26Z" />
      <path
        d="M249.18,41.89c0,13.68-5.31,24.2-20.39,24.2-6.52,0-11.08-2.51-13.87-6.52v5.59h-9.31V0h9.31V24.2c2.79-4,7.35-6.52,13.87-6.52,15.08,0,20.39,10.52,20.39,24.2Zm-9.31,0c0-11.17-3.35-15.82-12.47-15.82s-12.47,4.65-12.47,15.82,3.35,15.82,12.47,15.82,12.47-4.65,12.47-15.82Z" />
      <path
        d="M255.24,49.8c0-8.1,5.31-16.29,16.66-16.29,6.52,0,10.15,1.86,12.94,5.59v-12.1h-24.2v-8.38h33.51V55.85h5.59v9.31h-14.89v-4.65c-2.79,3.72-6.42,5.59-12.94,5.59-11.36,0-16.66-8.19-16.66-16.29Zm29.6,0c0-4.65-3.35-7.91-10.15-7.91s-10.15,3.26-10.15,7.91,3.35,7.91,10.15,7.91,10.15-3.26,10.15-7.91Z" />
      <path
        d="M306.71,60.13v-9.4c8.47,5.31,12.85,6.98,19.73,6.98,6.05,0,8.19-2.61,8.19-5.49,0-3.26-2.42-5.03-10.98-6.89-13.31-2.89-16.94-7.26-16.94-14.61,0-7.73,6.61-13.03,16.57-13.03,6.24,0,12.38,1.68,16.94,4.84v8.38c-6.8-3.35-12.75-4.84-17.87-4.84-4.75,0-6.33,2.05-6.33,4.37,0,2.61,1.21,4.37,9.12,6.52,13.78,3.72,18.8,6.61,18.8,15.17,0,7.91-6.61,13.96-17.5,13.96-7.26,0-12.94-1.4-19.73-5.96Z" />
      <path
        d="M350,41.89c0-14.61,5.77-24.2,20.11-24.2s20.11,8.66,20.11,23.27v5.12h-30.72c.65,6.52,3.26,11.64,14.15,11.64,3.72,0,7.35,0,13.4-1.68v8.19c-7.26,1.86-9.87,1.86-13.4,1.86-21.04,0-23.64-14.99-23.64-24.2Zm30.9-4.19c-.19-8.1-3.26-11.64-10.8-11.64s-10.33,4.1-10.8,11.64h21.6Z" />
    </g>
  </svg>
  <span class="visually-hidden">Backbase Engineering</span>
</span>

        </a>
      
    </div>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end me-4" id="navbarSupportedContent">
      <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="https://workatbackbase.com/" target="_blank">
                <span>Jobs</span>
              </a>
            </li>
          
            <li class="nav-item">
              <a class="nav-link" href="/about" >
                <span>About</span>
              </a>
            </li>
          </ul>
    </div>
        <ul class="navbar-nav" style="text-align:right;">
          <li class="nav-item">
            <a class="nav-primarylink" href="/principles"  style="text-decoration:none;">
              <span>Our Principles</span>
            </a>
          </li>
        </ul>
      
  </div>
</nav>


    <div class="initial-content">
      





<div id="main" role="main">
  <div class="container">
    <div class="row">
      <article class="page offset-md-2 col-md-8" itemscope itemtype="http://schema.org/CreativeWork">
        <meta itemprop="headline" content="Angular Unit Testing with Spectator">
        <meta itemprop="description" content="A robust testing library for unit testing">
        <meta itemprop="datePublished" content="October 25, 2023">
        

        <div class="page__inner-wrap">
          
            <header>
              <h1 class="page__title" itemprop="headline">Angular Unit Testing with Spectator
</h1>

              <aside class="author">
                
                  

<div itemscope itemtype="https://schema.org/Person">
  
    <div class="author__avatar">
      
        <img class="rounded-circle" src="/assets/images/avatars/utku.jpeg" alt="Utku" itemprop="image">
      
    </div>
  

  <div class="author__content text-muted">
    
      <h3 class="author__name" itemprop="name">Utku</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Frontend Engineer - Customer Success</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <div class="author__urls social-icons">
      

      

      

      

      

      

    </div>
  </div>
</div>

                
              </aside>

              
              

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <time datetime="2023-10-25T00:00:00+00:00">October 25, 2023</time>
      </span>
    

    

    
      
      

      <span class="page__meta-readtime small text-muted">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    

  </p>



              
            </header>
          

          <section class="page__content" itemprop="text">
            <p><img src="/assets/images/post/spectator-banner.png" alt="" /></p>

<h1 id="introduction">Introduction</h1>

<p>Spectator is a powerful testing tool designed to simplify Angular testing. It is built on top of the TestBed API and effectively reduces the boilerplate code associated with the built-in TestBed API. By doing so, Spectator delivers a more efficient and developer-friendly testing experience. In this article, we discuss Spectator test cases, installation, testing components and services, advantages, drawbacks, and migrating to Spectator.</p>

<h1 id="understanding-spectator-test-cases">Understanding Spectator Test Cases</h1>

<p>Spectator supports three main types of test cases:</p>

<ol>
  <li>
    <p><strong>Isolated unit tests</strong>:
Corresponding to <a href="https://angular.io/guide/testing-components-basics#component-class-testing"><strong>Component class testing</strong></a> mentioned in Angular.io.
These tests focus on testing component, directive, pipe, and service classes in isolation. Additionally, Spectator supports writing tests for routing and HTTP communication. It is essential to mock dependencies to ensure tests are isolated.</p>
  </li>
  <li>
    <p><strong>Shallow component tests</strong>:
Corresponding to <a href="https://angular.io/guide/testing-components-basics#component-dom-testing"><strong>Component DOM testing</strong></a> mentioned in Angular.io.
Shallow component tests focus on testing a component with a template, but ignoring the rendering of child components. By passing the ‘shallow: true’ option into the configuration, we can achieve this quite easily with Spectator.</p>
  </li>
  <li>
    <p><strong>Integration tests</strong>:
Corresponding to <a href="https://angular.io/guide/testing-components-basics#component-dom-testing"><strong>Component DOM testing</strong></a> mentioned in Angular.io.
Integration tests focus on testing how two or more components work together. These tests are particularly useful when components depend on each other.</p>
  </li>
</ol>

<p>In the following sections, we delve deeper into the installation process, testing components and services, and the advantages and drawbacks of using Spectator.</p>

<h2 id="installing-spectator">Installing Spectator</h2>

<p>To install Spectator, you can use either yarn or npm:</p>

<p><code class="language-plaintext highlighter-rouge">yarn add @ngneat/spectator --dev</code></p>

<p><code class="language-plaintext highlighter-rouge">npm install @ngneat/spectator --save-dev</code></p>

<p>Spectator uses <strong>Jasmine</strong> by default, but it supports <strong>Jest</strong> as well.
To be able to use it with Jest, make sure to target your imports from <code class="language-plaintext highlighter-rouge">@ngneat/spectator/jest</code> instead of <code class="language-plaintext highlighter-rouge">@ngneat/spectator</code>.</p>

<h1 id="testing-components-with-spectator">Testing Components with Spectator</h1>

<p>When testing components with Spectator, the first step is to create a component factory using the <code class="language-plaintext highlighter-rouge">createComponentFactory</code> function and pass the component class you want to test. This factory function returns a new component for each test block. Spectator offers various options for the <code class="language-plaintext highlighter-rouge">createComponentFactory</code> function, allowing you to customize your testing environment.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Spectator</span><span class="p">,</span> <span class="nx">createComponentFactory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@ngneat/spectator</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ButtonComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./button.component</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">ButtonComponent</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="na">spectator</span><span class="p">:</span> <span class="nx">Spectator</span><span class="o">&lt;</span><span class="nx">ButtonComponent</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">createComponent</span> <span class="o">=</span> <span class="nx">createComponentFactory</span><span class="p">(</span><span class="nx">ButtonComponent</span><span class="p">);</span>

  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">spectator</span> <span class="o">=</span> <span class="nx">createComponent</span><span class="p">()));</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should have a success class by default</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toHaveClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should set the class name according to the [className] input</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">spectator</span><span class="p">.</span><span class="nx">setInput</span><span class="p">(</span><span class="dl">"</span><span class="s2">className</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">danger</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toHaveClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">danger</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">)).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toHaveClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">createComponentFactory</code> function can optionally take the following options which extends the basic Angular Testing Module options:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">createComponent</span> <span class="o">=</span> <span class="nx">createComponentFactory</span><span class="p">({</span>
  <span class="na">component</span><span class="p">:</span> <span class="nx">ButtonComponent</span><span class="p">,</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">entryComponents</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">componentProviders</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Override the component's providers</span>
  <span class="na">componentViewProviders</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Override the component's view providers</span>
  <span class="na">overrideModules</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Override modules</span>
  <span class="na">mocks</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Providers that will automatically be mocked</span>
  <span class="na">componentMocks</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Component providers that will automatically be mocked</span>
  <span class="na">componentViewProvidersMocks</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// Component view providers that will be automatically mocked</span>
  <span class="na">detectChanges</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Defaults to true</span>
  <span class="na">declareComponent</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Defaults to true</span>
  <span class="na">disableAnimations</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Defaults to true</span>
  <span class="na">shallow</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// Defaults to false</span>
<span class="p">});</span>
</code></pre></div></div>

<p>After creating the component factory, you can use the <code class="language-plaintext highlighter-rouge">createComponent</code> function to test different aspects of your component, such as setting inputs, testing outputs, or running detectChanges().</p>

<p>The <code class="language-plaintext highlighter-rouge">createComponent</code> function optionally takes the following options:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should...</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">spectator</span> <span class="o">=</span> <span class="nx">createComponent</span><span class="p">({</span>
    <span class="c1">// The component inputs</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Click</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1">// Override the component's providers</span>
    <span class="na">providers</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1">// Whether to run change detection (defaults to true)</span>
    <span class="na">detectChanges</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toHaveText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Click</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">createComponent()</code> method returns an instance of <code class="language-plaintext highlighter-rouge">Spectator</code> which exposes the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">fixture</code> - The tested component’s fixture</li>
  <li><code class="language-plaintext highlighter-rouge">component</code> - The tested component’s instance</li>
  <li><code class="language-plaintext highlighter-rouge">element</code> - The tested component’s native element</li>
  <li><code class="language-plaintext highlighter-rouge">debugElement</code> - The tested fixture’s debug element</li>
</ul>

<p>And the following methods:</p>

<ul>
  <li>
    <p><strong>inject()</strong>
<br />
Provides a wrapper for Ivy’s <code class="language-plaintext highlighter-rouge">TestBed.inject()</code>:</p>

    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">spectator</span><span class="p">.</span><span class="nx">inject</span><span class="p">(</span><span class="nx">QueryService</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fromComponentInjector</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">spectator</span><span class="p">.</span><span class="nx">inject</span><span class="p">(</span><span class="nx">QueryService</span><span class="p">,</span> <span class="nx">fromComponentInjector</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>detectChanges()</strong>
<br />
Runs <code class="language-plaintext highlighter-rouge">detectChanges</code> on the tested element/host:</p>

    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">spectator</span><span class="p">.</span><span class="nx">detectChanges</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>setInput()</strong>
<br />
Changes the value of an <code class="language-plaintext highlighter-rouge">@Input()</code> of the tested component:</p>

    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should...</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">spectator</span><span class="p">.</span><span class="nx">setInput</span><span class="p">(</span><span class="dl">"</span><span class="s2">className</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">danger</span><span class="dl">"</span><span class="p">);</span>

  <span class="nx">spectator</span><span class="p">.</span><span class="nx">setInput</span><span class="p">({</span>
    <span class="na">className</span><span class="p">:</span> <span class="dl">"</span><span class="s2">danger</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>output()</strong>
<br />
Returns an observable <code class="language-plaintext highlighter-rouge">@Output()</code> of the tested component:</p>

    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should emit the $event on click</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">output</span><span class="p">;</span>
  <span class="nx">spectator</span><span class="p">.</span><span class="nx">output</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">result</span><span class="p">));</span>

  <span class="nx">spectator</span><span class="p">.</span><span class="nx">component</span><span class="p">.</span><span class="nx">onClick</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span> <span class="p">});</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">output</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">click</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>tick(millis?: number)</strong>
<br />
Run the fakeAsync <code class="language-plaintext highlighter-rouge">tick</code> function and call <code class="language-plaintext highlighter-rouge">detectChanges()</code>:</p>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should work with tick</span><span class="dl">"</span><span class="p">,</span> <span class="nx">fakeAsync</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">spectator</span> <span class="o">=</span> <span class="nx">createComponent</span><span class="p">(</span><span class="nx">ZippyComponent</span><span class="p">);</span>
  <span class="nx">spectator</span><span class="p">.</span><span class="nx">component</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">component</span><span class="p">.</span><span class="nx">updatedAsync</span><span class="p">).</span><span class="nx">toBeFalsy</span><span class="p">();</span>
  <span class="nx">spectator</span><span class="p">.</span><span class="nx">tick</span><span class="p">(</span><span class="mi">6000</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">component</span><span class="p">.</span><span class="nx">updatedAsync</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeFalsy</span><span class="p">();</span>
<span class="p">}));</span>
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="testing-services-with-spectator">Testing Services with Spectator</h1>

<p>To test services with Spectator, import the <code class="language-plaintext highlighter-rouge">createServiceFactory</code> and <code class="language-plaintext highlighter-rouge">SpectatorService</code> functions, and then create a service factory using the <code class="language-plaintext highlighter-rouge">createServiceFactory</code> function.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createServiceFactory</span><span class="p">,</span> <span class="nx">SpectatorService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@ngneat/spectator</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">auth.service.ts</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">AuthService</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="na">spectator</span><span class="p">:</span> <span class="nx">SpectatorService</span><span class="o">&lt;</span><span class="nx">AuthService</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">createService</span> <span class="o">=</span> <span class="nx">createServiceFactory</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">);</span>

  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">spectator</span> <span class="o">=</span> <span class="nx">createService</span><span class="p">()));</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">"</span><span class="s2">should not be logged in</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">spectator</span><span class="p">.</span><span class="nx">service</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">()).</span><span class="nx">toBeFalsy</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">createService</code> function returns <code class="language-plaintext highlighter-rouge">SpectatorService</code> with the following properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">service</code> - Get an instance of the service</li>
  <li><code class="language-plaintext highlighter-rouge">inject()</code> - A proxy for Angular <code class="language-plaintext highlighter-rouge">TestBed.inject()</code></li>
</ul>

<p><strong>For detailed examples, further information and other use cases, please refer to the official Spectator documentation:</strong> <a href="https://github.com/ngneat/spectator/">https://github.com/ngneat/spectator</a></p>

<h1 id="generating-spec-files-with-angular-cli-and-spectator-schematics">Generating Spec Files with Angular CLI and Spectator Schematics</h1>

<p>Creating spec files with Spectator configuration is made simple with the provided schematics.</p>

<p>To generate spec files:</p>

<p>For a component spec, run: <code class="language-plaintext highlighter-rouge">ng g cs example-component</code></p>

<p>For a service spec, run: <code class="language-plaintext highlighter-rouge">ng g ss example-service</code></p>

<p>For a directive spec, run: <code class="language-plaintext highlighter-rouge">ng g ds example-directive</code></p>

<h1 id="advantages-of-using-spectator">Advantages of Using Spectator</h1>

<p>Testing can sometimes be more challenging and time-consuming than the actual implementation. Configuring TestBed correctly may even take longer than writing the tests themselves. Spectator significantly improves the developer experience by making it easier and faster to write tests. As a result, it helps overcome the tendency to skip writing tests. Spectator achieves this by:</p>

<ul>
  <li>Simplifying test spec configuration by providing readable and concise API which helps to reduce boilerplate code.</li>
  <li>Improving readability and maintainability by providing a set of expressive and easier to understand custom matchers and assertions.</li>
  <li>Making mocking and spying easier.</li>
</ul>

<h1 id="drawbacks-of-using-spectator">Drawbacks of Using Spectator</h1>

<ul>
  <li>Learning curve might be considered steep.</li>
  <li>Official documentation might be considered relatively limited.</li>
  <li>Compatibility issues may arise with newer Angular version even though it might be temporary.</li>
</ul>

<h1 id="migrating">Migrating</h1>

<p>Spectator can be adopted gradually since it is not a complete replacement rather an enhancement. Whenever Spectator test suits are started to be written, these test suits can be kept in a separate file with <code class="language-plaintext highlighter-rouge">spectator</code> suffix. For example, <code class="language-plaintext highlighter-rouge">transactions.component.spectator.spec.ts</code>. Once the project is fully migrated to spectator, the <code class="language-plaintext highlighter-rouge">spectator</code> suffix can be omitted from all test file names.</p>

<p>For integration tests, there is also an approach that to create a separate test file with <code class="language-plaintext highlighter-rouge">integration</code> suffix to keep integration tests separate from rest of the test suites. For example, <code class="language-plaintext highlighter-rouge">transactions.component.integration.spec.ts</code>.</p>

<p>With a proper migration plan in place, developers can smoothly transition from their existing testing setup to Spectator without disrupting the project.</p>

<h1 id="conclusion">Conclusion</h1>

<p>By leveraging the power of Spectator, developers can enjoy a more efficient and user-friendly testing experience. With its simplified test spec configuration, improved readability, and enhanced mocking capabilities, Spectator is a valuable addition to any Angular project. Although it comes with a learning curve, the advantages it offers make it a worthwhile investment for improving your testing workflow. For developers looking to streamline their Angular testing process, Spectator is a powerful and versatile tool that can help you achieve your goals.</p>

<h1 id="references-and-additional-resources">References and Additional Resources</h1>

<ul>
  <li><a href="https://github.com/ngneat/spectator">Spectator Documentation</a></li>
  <li><a href="https://testing-angular.com/testing-components-with-spectator/#testing-components-with-spectator">testing-angular.com</a></li>
  <li>An in depth comparison between regular test specs and spectator test specs can be found in this open-source project: <a href="https://github.com/9elements/angular-workshop">https://github.com/9elements/angular-workshop</a>. <br /> Each test spec in this project has a jasmine and a spectator alternative allowing to make comparison as well as serving as a reference for additional use cases.</li>
</ul>

            
          </section>

          <footer class="page__meta">
            
            


          </footer>

          <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Angular+Unit+Testing+with+Spectator%20https%3A%2F%2Fbackbase.github.io%2F2023%2F10%2F25%2Fangular-unit-testing-with-spectator" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbackbase.github.io%2F2023%2F10%2F25%2Fangular-unit-testing-with-spectator" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbackbase.github.io%2F2023%2F10%2F25%2Fangular-unit-testing-with-spectator" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

        </div>

        
      </article>
    </div>

    
    
      <div class="page__related col-md-8 offset-md-2">
        
        <div class="grid__wrapper row">
          
            



<div class="grid__item col-12 col-md-6 mb-4">
  <article class="archive__item card" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser ">
        <img src="/assets/images/post/angular_microfrontends.png" alt="Micro Frontends" class="rounded-top">
      </div>
    
    <div class="card-body d-flex flex-column">
      <h2 class="archive__item-title no_toc">
        
          <a class="text-decoration-none" href="/2023/12/13/setup-microfrontend" rel="permalink">Angular &amp; Micro Frontends
</a>
        
      </h2>
      

  <p class="page__meta">
    
      
      <span class="page__meta-readtime small text-muted">
      By
      
        Harsh Julka
      
      </span>
      
    

    

    
      
      

      <span class="page__meta-readtime small text-muted">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    

  </p>


      <p class="archive__item-excerpt" itemprop="description">Micro Frontends is a modern architectural approach for developing web applications.
</p>
      <div class="d-flex mt-auto justify-content-end">
        <a href="/2023/12/13/setup-microfrontend" rel="permalink" class="btn btn-sm btn-link stretched-link">Read more</a>
      </div>
    </div>
  </article>
</div>

          
            



<div class="grid__item col-12 col-md-6 mb-4">
  <article class="archive__item card" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser ">
        <img src="/assets/images/post/azure-banner.png" alt="System Engineering" class="rounded-top">
      </div>
    
    <div class="card-body d-flex flex-column">
      <h2 class="archive__item-title no_toc">
        
          <a class="text-decoration-none" href="/2023/11/21/a-new-chapter-exploring-azure-resources" rel="permalink">A New Chapter: Exploring Azure Resources
</a>
        
      </h2>
      

  <p class="page__meta">
    
      
      <span class="page__meta-readtime small text-muted">
      By
      
        Sri Balaji, 
      
        Ashish Arora
      
      </span>
      
    

    

    
      
      

      <span class="page__meta-readtime small text-muted">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    

  </p>


      <p class="archive__item-excerpt" itemprop="description">Azure’s limitless potential sets the stage for a promising journey, where opportunities abound on the horizon.
</p>
      <div class="d-flex mt-auto justify-content-end">
        <a href="/2023/11/21/a-new-chapter-exploring-azure-resources" rel="permalink" class="btn btn-sm btn-link stretched-link">Read more</a>
      </div>
    </div>
  </article>
</div>

          
            



<div class="grid__item col-12 col-md-6 mb-4">
  <article class="archive__item card" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser ">
        <img src="/assets/images/post/visual-testing-banner.png" alt="Quality Assistance Approach" class="rounded-top">
      </div>
    
    <div class="card-body d-flex flex-column">
      <h2 class="archive__item-title no_toc">
        
          <a class="text-decoration-none" href="/2023/11/03/visual-testing-using-playwright" rel="permalink">Visual Testing using Playwright
</a>
        
      </h2>
      

  <p class="page__meta">
    
      
      <span class="page__meta-readtime small text-muted">
      By
      
        Venkata Ravi Majjari
      
      </span>
      
    

    

    
      
      

      <span class="page__meta-readtime small text-muted">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    

  </p>


      <p class="archive__item-excerpt" itemprop="description">Visual testing helps to find issues that are important for end-users that cannot be caught by other types of testing
</p>
      <div class="d-flex mt-auto justify-content-end">
        <a href="/2023/11/03/visual-testing-using-playwright" rel="permalink" class="btn btn-sm btn-link stretched-link">Read more</a>
      </div>
    </div>
  </article>
</div>

          
        </div>
      </div>
    
  </div>
</div>

    </div>

    

    <div id="footer" class="mt-auto page__footer">
      <footer class="bg-primary text-white text-center py-5 small">
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <div class="footer-brand">
    
      <a class="site-logo text-decoration-none" href="/">
        <span class="bb-engineering-logo">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60.09 66.09">
    <g>
      <polygon
        points="9.49 20.83 18.98 20.83 18.98 11.34 18.98 1.85 9.49 1.85 0 1.85 0 11.34 9.49 11.34 9.49 20.83" />
      <path
        d="M38.98,32.76v-1.49c9.3-1.3,11.72-7.45,11.72-13.5,0-7.48-5.12-15.59-17.78-15.89h-7.61V11.34h7.61c6.69,.11,8.11,4.45,8,7.87-.23,7.66-3.67,7.88-9.59,8.05H9.49v37.96h22.69c15.26,0,20.38-8.65,20.38-17.68,0-7.72-2.7-13.39-13.58-14.79Zm-6.52,22.9h-13.31v-19.17h13.31c8.04,0,10.63,1.52,10.63,9.74,0,6.91-2.59,9.42-10.63,9.42Z" />
    </g>
  </svg>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="60.09 0 330.12 66.09" class="d-none d-lg-block">
    <g>
      <path
        d="M60.04,49.8c0-8.1,5.31-16.29,16.66-16.29,6.52,0,10.15,1.86,12.94,5.59v-12.1h-24.2v-8.38h33.51V55.85h5.59v9.31h-14.89v-4.65c-2.79,3.72-6.42,5.59-12.94,5.59-11.36,0-16.66-8.19-16.66-16.29Zm29.6,0c0-4.65-3.35-7.91-10.15-7.91s-10.15,3.26-10.15,7.91,3.35,7.91,10.15,7.91,10.15-3.26,10.15-7.91Z" />
      <path
        d="M108.72,41.89c0-14.61,7.17-24.2,20.85-24.2,12.19,0,19.36,7.54,19.36,18.62h-9.31c-.37-5.77-2.33-10.24-9.59-10.24-8.66,0-12.01,3.72-12.01,15.82s3.35,15.82,12.01,15.82c7.26,0,9.22-4.47,9.59-10.24h9.31c0,11.08-7.17,18.62-19.36,18.62-13.68,0-20.85-9.59-20.85-24.2Z" />
      <path
        d="M167.08,46.17v18.99h-9.31V0h9.31V37.79h7.26l13.03-19.18h11.26l-15.92,23.36,15.92,23.18h-11.26l-13.03-18.99h-7.26Z" />
      <path
        d="M249.18,41.89c0,13.68-5.31,24.2-20.39,24.2-6.52,0-11.08-2.51-13.87-6.52v5.59h-9.31V0h9.31V24.2c2.79-4,7.35-6.52,13.87-6.52,15.08,0,20.39,10.52,20.39,24.2Zm-9.31,0c0-11.17-3.35-15.82-12.47-15.82s-12.47,4.65-12.47,15.82,3.35,15.82,12.47,15.82,12.47-4.65,12.47-15.82Z" />
      <path
        d="M255.24,49.8c0-8.1,5.31-16.29,16.66-16.29,6.52,0,10.15,1.86,12.94,5.59v-12.1h-24.2v-8.38h33.51V55.85h5.59v9.31h-14.89v-4.65c-2.79,3.72-6.42,5.59-12.94,5.59-11.36,0-16.66-8.19-16.66-16.29Zm29.6,0c0-4.65-3.35-7.91-10.15-7.91s-10.15,3.26-10.15,7.91,3.35,7.91,10.15,7.91,10.15-3.26,10.15-7.91Z" />
      <path
        d="M306.71,60.13v-9.4c8.47,5.31,12.85,6.98,19.73,6.98,6.05,0,8.19-2.61,8.19-5.49,0-3.26-2.42-5.03-10.98-6.89-13.31-2.89-16.94-7.26-16.94-14.61,0-7.73,6.61-13.03,16.57-13.03,6.24,0,12.38,1.68,16.94,4.84v8.38c-6.8-3.35-12.75-4.84-17.87-4.84-4.75,0-6.33,2.05-6.33,4.37,0,2.61,1.21,4.37,9.12,6.52,13.78,3.72,18.8,6.61,18.8,15.17,0,7.91-6.61,13.96-17.5,13.96-7.26,0-12.94-1.4-19.73-5.96Z" />
      <path
        d="M350,41.89c0-14.61,5.77-24.2,20.11-24.2s20.11,8.66,20.11,23.27v5.12h-30.72c.65,6.52,3.26,11.64,14.15,11.64,3.72,0,7.35,0,13.4-1.68v8.19c-7.26,1.86-9.87,1.86-13.4,1.86-21.04,0-23.64-14.99-23.64-24.2Zm30.9-4.19c-.19-8.1-3.26-11.64-10.8-11.64s-10.33,4.1-10.8,11.64h21.6Z" />
    </g>
  </svg>
  <span class="visually-hidden">Backbase Engineering</span>
</span>

      </a>
    
  </div>
  <ul class="social-icons list-unstyled">
    

    
      
        
          <li><a href="https://www.youtube.com/user/Backbase" rel="nofollow noopener noreferrer" target="_blank"><i class="fab fa-youtube" aria-hidden="true"></i><span class="visually-hidden">YouTube</span></a></li>
        
      
        
          <li><a href="https://www.linkedin.com/company/backbase/" rel="nofollow noopener noreferrer" target="_blank"><i class="fab fa-linkedin-in" aria-hidden="true"></i><span class="visually-hidden">LinkedIn</span></a></li>
        
      
        
          <li><a href="https://www.instagram.com/backbase_global/" rel="nofollow noopener noreferrer" target="_blank"><i class="fab fa-instagram" aria-hidden="true"></i><span class="visually-hidden">Instagram</span></a></li>
        
      
        
          <li><a href="https://www.glassdoor.nl/Overzicht/Werken-bij-Backbase-EI_IE117266.11,19.htm?countryRedirect=true" rel="nofollow noopener noreferrer" target="_blank"><i class="fab custom-glassdoor" aria-hidden="true"></i><span class="visually-hidden">Glassdoor</span></a></li>
        
      
        
          <li><a href="https://www.facebook.com/backbase" rel="nofollow noopener noreferrer" target="_blank"><i class="fab fa-facebook-f" aria-hidden="true"></i><span class="visually-hidden">Facebook</span></a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Backbase Engineering. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>


      </footer>
    </div>

    <script src='/assets/global-17ef4fa84e17b9a550efbf687d8fa54b.js' type='text/javascript'></script>


  </body>
</html>
